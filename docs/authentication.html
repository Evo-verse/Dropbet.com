<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Casino Platform - Account & Authentication</title>
    <style>
        body {
            font-family: Arial, sans-serif;

            color: #333;
            margin: 0;
            padding: 20px;
            line-height: 1.6;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        h2 {
            font-size: 1.8em;
            margin-top: 40px;
            margin-bottom: 10px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 4px;
        }

        h3 {
            font-size: 1.4em;
            margin-top: 20px;
            margin-bottom: 8px;
        }

        ul {
            margin-left: 20px;
        }

        ol {
            margin-left: 20px;
        }

        code {
            background-color: #eee;
            padding: 2px 4px;
            font-family: Consolas, monospace;
            border-radius: 4px;
        }

        pre {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.95em;
        }

        .section {
            margin-bottom: 40px;
        }
    </style>
</head>
<body>
<h1>Account &amp; Authentication</h1>
<p>
    This section describes the user account system and authentication flows, including supported login methods, token management,
    two-factor authentication, and security features.
</p>

<h2>4.1 Login and Signup</h2>
<p>The platform supports three authentication methods:</p>
<h3>Email and Password</h3>
<ul>
    <li>Users can sign up and log in using email and password credentials.</li>
    <li>Email verification is required to activate the account.</li>
    <li>After login, users may be prompted to set a username if not already set.</li>
</ul>

<h3>Google OAuth</h3>
<ul>
    <li>Implemented via the <code>/auth/google</code> endpoint.</li>
    <li>After OAuth login, the user proceeds to set a username if it's their first time.</li>
</ul>

<h3>Steam OAuth</h3>
<ul>
    <li>Integrated using the <code>/auth/steam</code> endpoint.</li>
    <li>Username setup is also required after the first OAuth login.</li>
</ul>
<p>All authentication logic is handled inside the <code>AuthModal</code> component.</p>

<h2>4.2 JWT Authentication and Tokens</h2>
<p>Authentication is managed using JSON Web Tokens (JWT), with three token types:</p>
<h3>Access Token</h3>
<ul>
    <li>Short-lived and used for authenticated requests.</li>
    <li>Stored securely in memory or cookie (implementation to be confirmed).</li>
</ul>

<h3>Refresh Token</h3>
<ul>
    <li>Used to obtain new access tokens without forcing re-login.</li>
    <li>Token refresh logic is implemented in <code>ApiClientBrowser.ts</code>.</li>
</ul>

<h3>Socket Token</h3>
<ul>
    <li>Used for real-time authenticated sessions via <code>socket.io-client</code>.</li>
</ul>
<p>
    The token refresh mechanism is part of the custom API client (<code>src/api/apiClient/</code>), and is invoked
    automatically when access tokens expire.
</p>

<h2>4.3 Two-Factor Authentication (2FA)</h2>
<p>Two-Factor Authentication is supported via Google Authenticator.</p>
<h3>Features include:</h3>
<h4>Setup Flow</h4>
<ul>
    <li>Users scan a QR code generated by the frontend (via <code>qrcode.react</code>).</li>
    <li>Backup recovery codes are provided and must be stored securely.</li>
    <li>Setup is confirmed through a verification code entry.</li>
</ul>

<h4>Login Flow</h4>
<ul>
    <li>After username/password or OAuth login, if 2FA is enabled, users are prompted for the 2FA code.</li>
    <li>The <code>verify2FA</code> mutation is used for backend validation.</li>
</ul>

<h4>Backup Codes</h4>
<ul>
    <li>Stored by the user and used in case of lost access to their 2FA device.</li>
</ul>

<p>2FA is optional and can be enabled/disabled via the account settings interface.</p>

<h2>4.4 Session Activity Log</h2>
<p>The user account interface includes a session history log. This displays:</p>
<ul>
    <li>Recent login times</li>
    <li>IP addresses</li>
    <li>Device/browser information</li>
    <li>Logout buttons for active sessions</li>
</ul>
<p>
    This functionality is visible in the account settings under the security tab and allows users to monitor
    and revoke session activity.
</p>

<h2>4.5 Self-Exclusion Options</h2>
<p>To support responsible gambling policies, the platform allows users to self-exclude by setting:</p>
<ul>
    <li>Temporary time-based restrictions (e.g. 24h, 7d, 30d)</li>
    <li>Permanent self-ban (until re-enabled manually by support)</li>
</ul>
<p>
    These options are located within the account settings page. Self-exclusion status is enforced on both frontend
    and backend: blocked users are logged out and prevented from accessing gaming sections.
</p>

<h2>4.6 KYC Verification</h2>
<p>The platform integrates with Sumsub for Know Your Customer (KYC) compliance.</p>
<ul>
    <li>Verification is triggered manually by the user from the account dashboard.</li>
    <li>A Sumsub iframe or redirect flow is initiated.</li>
    <li>Upon successful verification, the user’s status is updated.</li>
    <li>The account interface displays verification status and guidance.</li>
</ul>
<p>KYC status may be required for withdrawals or other restricted features, depending on admin configuration.</p>

<h2>4.7 Account Data and History</h2>
<p>The user account page includes a detailed overview of account-related actions:</p>
<h3>Transaction History</h3>
<ul>
    <li>Deposits</li>
    <li>Withdrawals</li>
    <li>Tips</li>
    <li>Bonus claims</li>
    <li>Promocode claims</li>
    <li>Bet history</li>
</ul>
<p>
    Each category is typically displayed in a separate tab or collapsible UI element, and includes filtering
    and date range selection.
</p>
<footer style="text-align: center; margin: 2rem 0; font-size: 1rem">
    <a href="https://evo-verse.github.io/Dropbet.com/" style="text-decoration: none; font-weight: bold"
    >← Home</a
    >
</footer>
</body>
</html>
